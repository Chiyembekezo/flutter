<!DOCTYPE html>
<html>
<!-- <html manifest="assets/assets/web/cache.manifest"> -->

<head>
  <meta charset="UTF-8">
  <meta content="IE=Edge" http-equiv="X-UA-Compatible">
  <meta name="description" content="Rive app">

  <link rel="icon" type="image/png" sizes="32x32" href="https://rive.app/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="https://rive.app/favicon-16x16.png">

  <!-- iOS meta tags & icons -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="rive">
  <link rel="apple-touch-icon" sizes="192Ã—192" href="assets/assets/web/launcher-icon-192.png">

  <link rel="manifest" href="assets/assets/web/manifest.json">

  <title>Rive</title>
</head>

<body>
  <!-- FileSaver to download exported files -->
  <script src='https://cdn.jsdelivr.net/npm/file-saver@2.0.2/dist/FileSaver.min.js'></script>
  <!-- This script installs service_worker.js to provide PWA functionality to
       application. For more information, see:
       https://developers.google.com/web/fundamentals/primers/service-workers -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', function () {
        navigator.serviceWorker.register('/flutter_service_worker.js');
      });
    }
  </script>
  <script>
    document.body.addEventListener("contextmenu", function (event) {
      event.preventDefault();
    });
  </script>
  <!-- Handle keyboard input events -->
  <script>
    window.onkeydown = function (event) {
      if (event.metaKey || event.ctrlKey) {
        // When ctrl or meta is pressed we want to suppress some default bound
        // browser actions (like CMD+Plus/Minus to zoom).
        switch (event.keyCode) {
          case 187:
          case 189:
            event.preventDefault();
            break;
        }
      }
      // Suppress backspace triggering a navigate back action.
      if (event.keyCode == 8 && event.target == document.body)
        event.preventDefault();
    }
  </script>

  <!-- This is the counterpart to the window_utils_web.dart drop files interface. TODO: get this into Dart/plugin land.  -->
  <script>
    document.body.ondragover = function (event) {
      event.stopPropagation();
      event.preventDefault();
      event.dataTransfer.dropEffect = "copy";
    };

    document.body.ondragleave = function (event) {
      event.stopPropagation();
      event.preventDefault();
    };

    document.body.ondrop = function (event) {
      event.stopPropagation();
      event.preventDefault();
      let files = event.dataTransfer.files;
      const fileList = [];
      let reading = files.length;

      function _decReading() {
        reading--;
        if (reading == 0 && fileList.length != 0) {
          filesDropped(fileList);
        }
      }

      for (const file of files) {
        var fileReader = new FileReader();
        fileReader.onload = function () {
          const bytes = new Uint8Array(this.result);
          fileList.push({
            filename: file.name,
            bytes: bytes
          });
          _decReading();
        };
        fileReader.onerror = function () {
          _decReading();
        };
        fileReader.readAsArrayBuffer(file);
      }
    };
  </script>
  <script src="main.dart.js?v=DEPLOYMENTVERSION" type="application/javascript"></script>
</body>

</html>